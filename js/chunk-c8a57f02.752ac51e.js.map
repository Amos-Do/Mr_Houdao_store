{"version":3,"sources":["webpack:///./src/views/frontend/CustomerOrder.vue?a89f","webpack:///src/views/frontend/CustomerOrder.vue","webpack:///./src/views/frontend/CustomerOrder.vue?c23c","webpack:///./src/views/frontend/CustomerOrder.vue?8f5d","webpack:///./src/assets/images/jam.png","webpack:///./src/views/frontend/CustomerOrder.vue?d44e"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","_v","_l","cart","item","key","id","style","product","staticStyle","_s","title","coupon","_e","_f","total","final_total","attrs","ref","on","$event","preventDefault","creatOrder","scopedSlots","_u","fn","errors","classes","directives","name","rawName","value","form","user","expression","class","domProps","target","composing","$set","staticRenderFns","data","email","tel","address","message","isLeave","created","getCart","computed","methods","vm","$refs","validate","then","success","$store","dispatch","order","$router","back","beforeRouteLeave","next","$","modal","component","module","exports"],"mappings":"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","file":"js/chunk-c8a57f02.752ac51e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mt-7\"},[_c('div',{staticClass:\"container p-3 p-md-4 auto-height\"},[_vm._m(0),_c('h2',{staticClass:\"jam-title\"},[_vm._v(\"建立訂單\")]),_vm._m(1),_c('div',{staticClass:\"my-4 row\"},[_c('table',{staticClass:\"table border mx-auto col-10 col-md-8\"},[_vm._m(2),_c('tbody',_vm._l((_vm.cart.carts),function(item){return _c('tr',{key:item.id},[_c('td',{staticClass:\"d-sm-block d-none text-center\"},[_c('div',{staticClass:\"cart-image d-inline-block\",style:({ 'backgroundImage':(\"url('\" + (item.product.imageUrl) + \"')\") })})]),_c('td',{staticClass:\"align-middle\",staticStyle:{\"width\":\"auto\"}},[_c('span',[_vm._v(_vm._s(item.product.title))]),_c('br'),_c('span',{staticClass:\"text-gray-600\"},[_vm._v(\"x \"+_vm._s(((item.qty) + \" \" + (item.product.unit))))]),_c('br'),(item.coupon)?_c('small',{staticClass:\"text-success\"},[_vm._v(\"優惠券-\"+_vm._s(item.coupon.title))]):_vm._e()]),_c('td',{staticClass:\"align-middle text-right border-right\"},[_vm._v(_vm._s(_vm._f(\"currency\")(item.total))+\"元\")])])}),0),_c('tfoot',[_c('tr',[((_vm.cart.total - _vm.cart.final_total) > 0)?_c('td',{staticClass:\"text-right text-success\",attrs:{\"colspan\":\"3\"}},[_vm._v(\" 折扣金額: \"),_c('span',{staticClass:\"ml-4 mr-1\"},[_vm._v(_vm._s(_vm._f(\"currency\")(_vm.cart.total - _vm.cart.final_total))+\"元\")])]):_vm._e()]),_c('tr',[_c('td',{staticClass:\"bg-secondary text-right text-light font-weight-bold\",attrs:{\"colspan\":\"3\"}},[_vm._v(\" 總計: \"),_c('span',{staticClass:\"h2\"},[_vm._v(_vm._s(_vm._f(\"currency\")(_vm.cart.final_total))+\"元\")])])])])])]),_c('ValidationObserver',{ref:\"form\",staticClass:\"my-5 row justify-content-center\"},[_c('form',{staticClass:\"mx-auto col-12 col-md-8\",on:{\"submit\":function($event){$event.preventDefault();return _vm.creatOrder($event)}}},[_c('h5',{staticClass:\"mb-5 text-center\"},[_vm._v(\"填寫訂單資料\")]),_c('div',{staticClass:\"form-row\"},[_c('div',{staticClass:\"form-group col-md-6\"},[_c('validation-provider',{attrs:{\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('label',{attrs:{\"for\":\"username\"}},[_vm._v(\"收件人姓名*\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.name),expression:\"form.user.name\"}],staticClass:\"form-control\",class:classes,attrs:{\"type\":\"text\",\"name\":\"姓名\",\"id\":\"username\",\"placeholder\":\"輸入姓名\"},domProps:{\"value\":(_vm.form.user.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"name\", $event.target.value)}}}),_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))])]}}])})],1),_c('div',{staticClass:\"form-group col-md-6\"},[_c('validation-provider',{attrs:{\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('label',{attrs:{\"for\":\"usertel\"}},[_vm._v(\"收件人電話*\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.tel),expression:\"form.user.tel\"}],staticClass:\"form-control\",class:classes,attrs:{\"type\":\"tel\",\"name\":\"收件人電話\",\"id\":\"usertel\",\"placeholder\":\"請輸入電話\"},domProps:{\"value\":(_vm.form.user.tel)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"tel\", $event.target.value)}}}),_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))])]}}])})],1)]),_c('div',{staticClass:\"form-group\"},[_c('validation-provider',{attrs:{\"rules\":\"required|email\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('label',{attrs:{\"for\":\"useremail\"}},[_vm._v(\"Email*\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.email),expression:\"form.user.email\"}],staticClass:\"form-control\",class:classes,attrs:{\"type\":\"email\",\"name\":\"Email\",\"id\":\"useremail\",\"placeholder\":\"請輸入 Email\"},domProps:{\"value\":(_vm.form.user.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"email\", $event.target.value)}}}),_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))])]}}])})],1),_c('div',{staticClass:\"form-group\"},[_c('validation-provider',{attrs:{\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('label',{attrs:{\"for\":\"useraddress\"}},[_vm._v(\"收件人地址*\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.address),expression:\"form.user.address\"}],staticClass:\"form-control\",class:classes,attrs:{\"type\":\"text\",\"name\":\"收件人地址\",\"id\":\"useraddress\",\"placeholder\":\"請輸入地址\"},domProps:{\"value\":(_vm.form.user.address)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"address\", $event.target.value)}}}),_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))])]}}])})],1),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"comment\"}},[_vm._v(\"備註\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.message),expression:\"form.message\"}],staticClass:\"form-control\",attrs:{\"name\":\"\",\"id\":\"comment\",\"cols\":\"30\",\"rows\":\"10\"},domProps:{\"value\":(_vm.form.message)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"message\", $event.target.value)}}})]),_c('div',{staticClass:\"text-right\"},[_c('button',{staticClass:\"btn btn-light-red\"},[_vm._v(\"確認送出訂單\")])])])])],1),_vm._m(3)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"jam-icon text-center\"},[_c('img',{attrs:{\"src\":require(\"@/assets/images/jam.png\")}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row mb-5\"},[_c('div',{staticClass:\"col-sm-4\"},[_c('div',{staticClass:\"alert alert-success rounded-pill text-center\",attrs:{\"role\":\"alert\"}},[_vm._v(\"1.填寫訂單\")])]),_c('div',{staticClass:\"col-sm-4\"},[_c('div',{staticClass:\"alert alert-light rounded-pill text-center\",attrs:{\"role\":\"alert\"}},[_vm._v(\"2.確認付款\")])]),_c('div',{staticClass:\"col-sm-4\"},[_c('div',{staticClass:\"alert alert-light rounded-pill text-center\",attrs:{\"role\":\"alert\"}},[_vm._v(\"3.訂單完成\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',{staticClass:\"bg-gray-100\",staticStyle:{\"border-top\":\"5px solid #87A861\"}},[_c('tr',[_c('th',{attrs:{\"colspan\":\"3\"}},[_vm._v(\"訂單明細\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"CreateOrder\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-labelledby\":\"CreateOrderCenterTitle\",\"aria-hidden\":\"true\",\"data-backdrop\":\"static\"}},[_c('div',{staticClass:\"modal-dialog modal-dialog-centered\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-body leave-modal\"},[_c('p',[_vm._v(\"您的訂單尚未成立，確定要離開此頁?\")]),_c('div',{staticClass:\"text-right\"},[_c('button',{staticClass:\"btn btn-outline-secondary mr-2 confirm\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\"確定\")]),_c('button',{staticClass:\"btn btn-danger cancel\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\"取消\")])])])])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"mt-7\">\n    <div class=\"container p-3 p-md-4 auto-height\">\n      <div class=\"jam-icon text-center\">\n        <img src=\"@/assets/images/jam.png\" />\n      </div>\n      <h2 class=\"jam-title\">建立訂單</h2>\n      <div class=\"row mb-5\">\n        <div class=\"col-sm-4\">\n          <div class=\"alert alert-success rounded-pill text-center\" role=\"alert\">1.填寫訂單</div>\n        </div>\n        <div class=\"col-sm-4\">\n          <div class=\"alert alert-light rounded-pill text-center\" role=\"alert\">2.確認付款</div>\n        </div>\n        <div class=\"col-sm-4\">\n          <div class=\"alert alert-light rounded-pill text-center\" role=\"alert\">3.訂單完成</div>\n        </div>\n      </div>\n      <div class=\"my-4 row\">\n        <table class=\"table border mx-auto col-10 col-md-8\">\n          <thead class=\"bg-gray-100\" style=\"border-top: 5px solid #87A861\">\n            <tr>\n              <th colspan=\"3\">訂單明細</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"item in cart.carts\" :key=\"item.id\">\n              <td class=\"d-sm-block d-none text-center\">\n                <div\n                  class=\"cart-image d-inline-block\"\n                  :style=\"{ 'backgroundImage':`url('${item.product.imageUrl}')` }\"\n                ></div>\n              </td>\n              <td class=\"align-middle\" style=\"width:auto;\">\n                <span>{{ item.product.title }}</span>\n                <br />\n                <span class=\"text-gray-600\">x {{ `${item.qty} ${item.product.unit}` }}</span>\n                <br />\n                <small class=\"text-success\" v-if=\"item.coupon\">優惠券-{{ item.coupon.title }}</small>\n              </td>\n              <td class=\"align-middle text-right border-right\">{{ item.total | currency }}元</td>\n            </tr>\n          </tbody>\n          <tfoot>\n            <tr>\n              <td\n                colspan=\"3\"\n                class=\"text-right text-success\"\n                v-if=\"(cart.total - cart.final_total) > 0\"\n              >\n                折扣金額:\n                <span class=\"ml-4 mr-1\">{{ cart.total - cart.final_total | currency }}元</span>\n              </td>\n            </tr>\n            <tr>\n              <td colspan=\"3\" class=\"bg-secondary text-right text-light font-weight-bold\">\n                總計:\n                <span class=\"h2\">{{ cart.final_total | currency }}元</span>\n              </td>\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n      <!-- 訂單資料 -->\n      <ValidationObserver ref=\"form\" class=\"my-5 row justify-content-center\">\n        <form class=\"mx-auto col-12 col-md-8\" @submit.prevent=\"creatOrder\">\n          <h5 class=\"mb-5 text-center\">填寫訂單資料</h5>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-6\">\n              <validation-provider rules=\"required\" v-slot=\"{errors, classes}\">\n                <label for=\"username\">收件人姓名*</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  name=\"姓名\"\n                  id=\"username\"\n                  placeholder=\"輸入姓名\"\n                  v-model=\"form.user.name\"\n                  :class=\"classes\"\n                />\n                <span class=\"text-danger\">{{ errors[0] }}</span>\n              </validation-provider>\n            </div>\n            <div class=\"form-group col-md-6\">\n              <validation-provider rules=\"required\" v-slot=\"{errors, classes}\">\n                <label for=\"usertel\">收件人電話*</label>\n                <input\n                  type=\"tel\"\n                  class=\"form-control\"\n                  name=\"收件人電話\"\n                  id=\"usertel\"\n                  placeholder=\"請輸入電話\"\n                  v-model=\"form.user.tel\"\n                  :class=\"classes\"\n                />\n                <span class=\"text-danger\">{{ errors[0] }}</span>\n              </validation-provider>\n            </div>\n          </div>\n\n          <div class=\"form-group\">\n            <validation-provider rules=\"required|email\" v-slot=\"{errors, classes}\">\n              <label for=\"useremail\">Email*</label>\n              <input\n                type=\"email\"\n                class=\"form-control\"\n                name=\"Email\"\n                id=\"useremail\"\n                placeholder=\"請輸入 Email\"\n                v-model=\"form.user.email\"\n                :class=\"classes\"\n              />\n              <span class=\"text-danger\">{{ errors[0] }}</span>\n            </validation-provider>\n          </div>\n\n          <div class=\"form-group\">\n            <validation-provider rules=\"required\" v-slot=\"{errors, classes}\">\n              <label for=\"useraddress\">收件人地址*</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                name=\"收件人地址\"\n                id=\"useraddress\"\n                placeholder=\"請輸入地址\"\n                v-model=\"form.user.address\"\n                :class=\"classes\"\n              />\n              <span class=\"text-danger\">{{ errors[0] }}</span>\n            </validation-provider>\n          </div>\n\n          <div class=\"form-group\">\n            <label for=\"comment\">備註</label>\n            <textarea\n              name\n              id=\"comment\"\n              class=\"form-control\"\n              cols=\"30\"\n              rows=\"10\"\n              v-model=\"form.message\"\n            ></textarea>\n          </div>\n          <div class=\"text-right\">\n            <button class=\"btn btn-light-red\">確認送出訂單</button>\n          </div>\n        </form>\n      </ValidationObserver>\n    </div>\n\n    <!-- Modal -->\n    <div\n      class=\"modal fade\"\n      id=\"CreateOrder\"\n      tabindex=\"-1\"\n      role=\"dialog\"\n      aria-labelledby=\"CreateOrderCenterTitle\"\n      aria-hidden=\"true\"\n      data-backdrop=\"static\"\n    >\n      <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-body leave-modal\">\n            <p>您的訂單尚未成立，確定要離開此頁?</p>\n            <div class=\"text-right\">\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-secondary mr-2 confirm\"\n                data-dismiss=\"modal\"\n              >確定</button>\n              <button type=\"button\" class=\"btn btn-danger cancel\" data-dismiss=\"modal\">取消</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n/* global $ */\nimport { mapGetters, mapActions } from 'vuex';\n\nexport default {\n  data() {\n    return {\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n        isLeave: false,\n      },\n    };\n  },\n  created() {\n    this.getCart();\n  },\n  computed: {\n    ...mapGetters('cartModules', ['cart']),\n  },\n  methods: {\n    ...mapActions('cartModules', ['getCart']),\n    creatOrder() {\n      const vm = this;\n      const order = vm.form;\n      if (vm.cart.total === 0) {\n        vm.$router.back();\n        return;\n      }\n      vm.$refs.form.validate().then((success) => {\n        if (success) {\n          vm.$store.dispatch('orderModules/creatOrder', order);\n          vm.isLeave = true;\n        } else {\n          vm.$store.dispatch(\n            'alertModules/updateMessage',\n            { message: '欄位填寫不完整', status: 'danger' },\n            { root: true },\n          );\n        }\n      });\n    },\n  },\n  beforeRouteLeave(to, from, next) {\n    const vm = this;\n    if (vm.isLeave) {\n      next();\n    } else {\n      if (vm.cart.total === 0) {\n        next();\n        return;\n      }\n      $('#CreateOrder').modal('show');\n\n      $('.confirm').on('click', () => {\n        next();\n      });\n      $('.cancel').on('click', () => {\n        next(false);\n      });\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.alert-light {\n  background: #f7f7f7;\n  border-color: #f2f2f2;\n  color: #919191;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerOrder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerOrder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CustomerOrder.vue?vue&type=template&id=6b715bc5&\"\nimport script from \"./CustomerOrder.vue?vue&type=script&lang=js&\"\nexport * from \"./CustomerOrder.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CustomerOrder.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/jam.00f7b109.png\";","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerOrder.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerOrder.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}