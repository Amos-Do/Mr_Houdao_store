(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c8a57f02"],{1758:function(t,e,a){},"7e8a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-7"},[a("div",{staticClass:"container p-3 p-md-4 auto-height"},[t._m(0),a("h2",{staticClass:"jam-title"},[t._v("建立訂單")]),t._m(1),a("div",{staticClass:"my-4 row"},[a("table",{staticClass:"table border mx-auto col-10 col-md-8"},[t._m(2),a("tbody",t._l(t.cart.carts,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"d-sm-block d-none text-center"},[a("div",{staticClass:"cart-image d-inline-block",style:{backgroundImage:"url('"+e.product.imageUrl+"')"}})]),a("td",{staticClass:"align-middle",staticStyle:{width:"auto"}},[a("span",[t._v(t._s(e.product.title))]),a("br"),a("span",{staticClass:"text-gray-600"},[t._v("x "+t._s(e.qty+" "+e.product.unit))]),a("br"),e.coupon?a("small",{staticClass:"text-success"},[t._v("優惠券-"+t._s(e.coupon.title))]):t._e()]),a("td",{staticClass:"align-middle text-right border-right"},[t._v(t._s(t._f("currency")(e.total))+"元")])])})),0),a("tfoot",[a("tr",[t.cart.total-t.cart.final_total>0?a("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v(" 折扣金額: "),a("span",{staticClass:"ml-4 mr-1"},[t._v(t._s(t._f("currency")(t.cart.total-t.cart.final_total))+"元")])]):t._e()]),a("tr",[a("td",{staticClass:"bg-secondary text-right text-light font-weight-bold",attrs:{colspan:"3"}},[t._v(" 總計: "),a("span",{staticClass:"h2"},[t._v(t._s(t._f("currency")(t.cart.final_total))+"元")])])])])])]),a("ValidationObserver",{ref:"form",staticClass:"my-5 row justify-content-center"},[a("form",{staticClass:"mx-auto col-12 col-md-8",on:{submit:function(e){return e.preventDefault(),t.creatOrder(e)}}},[a("h5",{staticClass:"mb-5 text-center"},[t._v("填寫訂單資料")]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("label",{attrs:{for:"username"}},[t._v("收件人姓名*")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",class:r,attrs:{type:"text",name:"姓名",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"form-group col-md-6"},[a("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話*")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",class:r,attrs:{type:"tel",name:"收件人電話",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}])})],1)]),a("div",{staticClass:"form-group"},[a("validation-provider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("label",{attrs:{for:"useremail"}},[t._v("Email*")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",class:r,attrs:{type:"email",name:"Email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"form-group"},[a("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址*")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",class:r,attrs:{type:"text",name:"收件人地址",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v("備註")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-light-red"},[t._v("確認送出訂單")])])])])],1),t._m(3)])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"jam-icon text-center"},[s("img",{attrs:{src:a("9fb0")}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mb-5"},[a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"alert alert-success rounded-pill text-center",attrs:{role:"alert"}},[t._v("1.填寫訂單")])]),a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"alert alert-light rounded-pill text-center",attrs:{role:"alert"}},[t._v("2.確認付款")])]),a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"alert alert-light rounded-pill text-center",attrs:{role:"alert"}},[t._v("3.訂單完成")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"bg-gray-100",staticStyle:{"border-top":"5px solid #87A861"}},[a("tr",[a("th",{attrs:{colspan:"3"}},[t._v("訂單明細")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"CreateOrder",tabindex:"-1",role:"dialog","aria-labelledby":"CreateOrderCenterTitle","aria-hidden":"true","data-backdrop":"static"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body leave-modal"},[a("p",[t._v("您的訂單尚未成立，確定要離開此頁?")]),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-outline-secondary mr-2 confirm",attrs:{type:"button","data-dismiss":"modal"}},[t._v("確定")]),a("button",{staticClass:"btn btn-danger cancel",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")])])])])])])}],o=a("5530"),l=a("2f62"),i={data:function(){return{form:{user:{name:"",email:"",tel:"",address:""},message:"",isLeave:!1}}},created:function(){this.getCart()},computed:Object(o["a"])({},Object(l["c"])("cartModules",["cart"])),methods:Object(o["a"])(Object(o["a"])({},Object(l["b"])("cartModules",["getCart"])),{},{creatOrder:function(){var t=this,e=t.form;0!==t.cart.total?t.$refs.form.validate().then((function(a){a?(t.$store.dispatch("orderModules/creatOrder",e),t.isLeave=!0):t.$store.dispatch("alertModules/updateMessage",{message:"欄位填寫不完整",status:"danger"},{root:!0})})):t.$router.back()}}),beforeRouteLeave:function(t,e,a){var s=this;if(s.isLeave)a();else{if(0===s.cart.total)return void a();$("#CreateOrder").modal("show"),$(".confirm").on("click",(function(){a()})),$(".cancel").on("click",(function(){a(!1)}))}}},c=i,n=(a("efdc"),a("2877")),d=Object(n["a"])(c,s,r,!1,null,null,null);e["default"]=d.exports},"9fb0":function(t,e,a){t.exports=a.p+"img/jam.00f7b109.png"},efdc:function(t,e,a){"use strict";var s=a("1758"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-c8a57f02.752ac51e.js.map